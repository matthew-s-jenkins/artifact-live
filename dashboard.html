<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artifact Live - Dashboard</title>

    <!-- Apply theme background IMMEDIATELY to prevent white flash -->
    <script>
        (function() {
            const themeColors = {
                cyan: '#111827',
                tan: '#1c1917',
                purple: '#151621',
                emerald: '#111f1b',
                rose: '#121012',
                slate: '#0a0a0a'
            };
            const savedTheme = localStorage.getItem('theme') || 'cyan';
            document.documentElement.style.backgroundColor = themeColors[savedTheme];
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- External Theme Stylesheet -->
    <link rel="stylesheet" href="themes.css">
</head>
<body class="bg-gray-900" data-theme="cyan">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Using relative URLs now that we're serving from Flask
        const API_BASE_URL = '';

        // ============================================================================
        // LOCATIONS TAB COMPONENT
        // ============================================================================

        const LocationsTab = ({ user, businessId }) => {
            const [locations, setLocations] = useState([]);
            const [showAddForm, setShowAddForm] = useState(false);
            const [newLocation, setNewLocation] = useState({
                name: '',
                description: '',
                location_type: 'Storage'
            });

            useEffect(() => {
                loadLocations();
            }, []);

            const loadLocations = async () => {
                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/locations?business_id=${businessId}`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setLocations(data);
                    }
                } catch (error) {
                    console.error('Error loading locations:', error);
                }
            };

            const handleAddLocation = async (e) => {
                e.preventDefault();
                try {
                    const response = await fetch(`${API_BASE_URL}/api/locations`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        credentials: 'include',
                        body: JSON.stringify({
                            ...newLocation,
                            business_id: businessId
                        })
                    });

                    if (response.ok) {
                        setNewLocation({ name: '', description: '', location_type: 'Storage' });
                        setShowAddForm(false);
                        loadLocations();
                    } else {
                        const error = await response.json();
                        alert('Error: ' + error.error);
                    }
                } catch (error) {
                    console.error('Error adding location:', error);
                    alert('Failed to add location');
                }
            };

            const handleDeleteLocation = async (locationId) => {
                if (!confirm('Are you sure you want to delete this location?')) return;

                try {
                    const response = await fetch(`${API_BASE_URL}/api/locations/${locationId}`, {
                        method: 'DELETE',
                        credentials: 'include'
                    });

                    if (response.ok) {
                        loadLocations();
                    }
                } catch (error) {
                    console.error('Error deleting location:', error);
                }
            };

            return (
                <div>
                    <div className="mb-6 flex justify-between items-center">
                        <h2 className="text-2xl font-bold text-white">Locations</h2>
                        <button
                            onClick={() => setShowAddForm(!showAddForm)}
                            className="btn-primary px-4 py-2 text-white font-medium rounded-lg transition shadow-sm"
                        >
                            {showAddForm ? 'Cancel' : '+ Add Location'}
                        </button>
                    </div>

                    {showAddForm && (
                        <div className="card-bg border rounded-lg shadow p-6 mb-6">
                            <h3 className="text-lg font-semibold text-white mb-4">Add New Location</h3>
                            <form onSubmit={handleAddLocation}>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">
                                            Location Name *
                                        </label>
                                        <input
                                            type="text"
                                            required
                                            value={newLocation.name}
                                            onChange={(e) => setNewLocation({...newLocation, name: e.target.value})}
                                            className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                            placeholder="e.g., Switch Box 1"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-2">
                                            Type
                                        </label>
                                        <select
                                            value={newLocation.location_type}
                                            onChange={(e) => setNewLocation({...newLocation, location_type: e.target.value})}
                                            className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                        >
                                            <option value="Storage">Storage</option>
                                            <option value="Workspace">Workspace</option>
                                            <option value="Shipping">Shipping</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    <div className="md:col-span-2">
                                        <label className="block text-sm font-medium text-gray-300 mb-2">
                                            Description
                                        </label>
                                        <textarea
                                            value={newLocation.description}
                                            onChange={(e) => setNewLocation({...newLocation, description: e.target.value})}
                                            className="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                            rows="2"
                                            placeholder="Optional description"
                                        />
                                    </div>
                                </div>
                                <div className="mt-4 flex justify-end">
                                    <button
                                        type="submit"
                                        className="btn-primary px-6 py-2 text-white font-medium rounded-lg transition"
                                    >
                                        Create Location
                                    </button>
                                </div>
                            </form>
                        </div>
                    )}

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {locations.length === 0 ? (
                            <div className="col-span-full text-center py-12">
                                <p className="text-gray-400">No locations yet. Click "Add Location" to create one.</p>
                            </div>
                        ) : (
                            locations.map(location => (
                                <div key={location.location_id} className="card-bg border rounded-lg shadow p-6">
                                    <div className="flex justify-between items-start mb-3">
                                        <div>
                                            <h3 className="text-lg font-semibold text-white">{location.name}</h3>
                                            <span className="inline-block px-2 py-1 text-xs rounded bg-primary bg-opacity-20 text-primary mt-1">
                                                {location.location_type}
                                            </span>
                                        </div>
                                        <button
                                            onClick={() => handleDeleteLocation(location.location_id)}
                                            className="text-red-400 hover:text-red-300"
                                            title="Delete location"
                                        >
                                            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                            </svg>
                                        </button>
                                    </div>
                                    {location.description && (
                                        <p className="text-sm text-gray-400">{location.description}</p>
                                    )}
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        };

        // ============================================================================
        // INVENTORY TAB COMPONENT
        // ============================================================================

        const InventoryTab = ({ user, businessId, onOpenIngestionWizard }) => {
            const [inventory, setInventory] = useState([]);
            const [totals, setTotals] = useState({
                total_products: 0,
                total_quantity: 0,
                total_value: 0
            });
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadInventory();
            }, []);

            const loadInventory = async () => {
                try {
                    setLoading(true);
                    const response = await fetch(
                        `${API_BASE_URL}/api/inventory/summary?business_id=${businessId}`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setInventory(data.products || []);
                        setTotals(data.totals || { total_products: 0, total_quantity: 0, total_value: 0 });
                    }
                } catch (error) {
                    console.error('Error loading inventory:', error);
                } finally {
                    setLoading(false);
                }
            };

            const uniqueCategories = [...new Set(inventory.map(p => p.category))].length;

            return (
                <div>
                    {/* Quick Actions */}
                    <div className="mb-6 flex justify-between items-center">
                        <h2 className="text-2xl font-bold text-white">Inventory</h2>
                        <button
                            onClick={onOpenIngestionWizard}
                            className="btn-primary px-4 py-2 text-white font-medium rounded-lg transition shadow-sm"
                        >
                            Fast Ingest
                        </button>
                    </div>

                    {/* Stats Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div className="card-bg border rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-400">Total Products</p>
                                    <p className="text-3xl font-bold text-white mt-2">{totals.total_products}</p>
                                </div>
                                <div className="bg-opacity-20 btn-primary rounded-full p-3">
                                    <svg className="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div className="card-bg border rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-400">Total Quantity</p>
                                    <p className="text-3xl font-bold text-white mt-2">{totals.total_quantity.toFixed(0)}</p>
                                </div>
                                <div className="bg-opacity-20 btn-primary rounded-full p-3">
                                    <svg className="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div className="card-bg border rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-400">Inventory Value</p>
                                    <p className="text-3xl font-bold text-white mt-2">${totals.total_value.toFixed(2)}</p>
                                </div>
                                <div className="bg-opacity-20 btn-primary rounded-full p-3">
                                    <svg className="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div className="card-bg border rounded-lg shadow p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm text-gray-400">Categories</p>
                                    <p className="text-3xl font-bold text-white mt-2">{uniqueCategories}</p>
                                </div>
                                <div className="bg-opacity-20 btn-primary rounded-full p-3">
                                    <svg className="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Inventory Table */}
                    <div className="card-bg border rounded-lg shadow">
                        <div className="px-6 py-4 border-b border-gray-700">
                            <h3 className="text-lg font-semibold text-white">Products</h3>
                        </div>
                        {loading ? (
                            <div className="p-12 text-center">
                                <p className="text-gray-400">Loading inventory...</p>
                            </div>
                        ) : inventory.length === 0 ? (
                            <div className="p-12 text-center">
                                <svg className="mx-auto h-12 w-12 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                                </svg>
                                <h3 className="mt-2 text-sm font-medium text-white">No inventory yet</h3>
                                <p className="mt-1 text-sm text-gray-400">Get started by adding products using Fast Ingest.</p>
                                <div className="mt-6">
                                    <button
                                        onClick={onOpenIngestionWizard}
                                        className="btn-primary inline-flex items-center px-4 py-2 text-sm font-medium text-white rounded-md"
                                    >
                                        <svg className="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                                        </svg>
                                        Fast Ingest
                                    </button>
                                </div>
                            </div>
                        ) : (
                            <div className="overflow-x-auto">
                                <table className="min-w-full divide-y divide-gray-700">
                                    <thead className="bg-gray-800">
                                        <tr>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">SKU</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Product</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Category</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Quantity</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Avg Cost</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Total Value</th>
                                            <th className="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Locations</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-gray-700">
                                        {inventory.map(product => (
                                            <tr key={product.product_id} className="hover:bg-gray-800 transition">
                                                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-primary">{product.sku}</td>
                                                <td className="px-6 py-4 whitespace-nowrap text-sm text-white">{product.name}</td>
                                                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-400">
                                                    <span className="px-2 py-1 text-xs rounded bg-gray-700 text-gray-300">{product.category}</span>
                                                </td>
                                                <td className="px-6 py-4 whitespace-nowrap text-sm text-white font-semibold">{Math.round(product.total_quantity)}</td>
                                                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-400">${parseFloat(product.avg_cost).toFixed(4)}</td>
                                                <td className="px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold">${parseFloat(product.total_value).toFixed(2)}</td>
                                                <td className="px-6 py-4 text-sm text-gray-400">
                                                    {product.locations && product.locations.length > 0 ? (
                                                        <div className="flex flex-wrap gap-1">
                                                            {product.locations.map((loc, idx) => (
                                                                <span key={idx} className="px-2 py-1 text-xs rounded bg-gray-700 text-gray-300">
                                                                    {loc.name}: {loc.quantity}
                                                                </span>
                                                            ))}
                                                        </div>
                                                    ) : (
                                                        <span className="text-gray-500">No location</span>
                                                    )}
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // ============================================================================
        // FINANCIALS TAB COMPONENT
        // ============================================================================

        const FinancialsTab = ({ user, businessId }) => {
            const [activeView, setActiveView] = useState('ledger'); // ledger, trial, balance, accounts
            const [accountingEquation, setAccountingEquation] = useState(null);
            const [ledger, setLedger] = useState([]);
            const [ledgerPagination, setLedgerPagination] = useState({ total_count: 0, limit: 100, offset: 0 });
            const [trialBalance, setTrialBalance] = useState(null);
            const [balanceSheet, setBalanceSheet] = useState(null);
            const [accounts, setAccounts] = useState([]);
            const [showCreateAccount, setShowCreateAccount] = useState(false);
            const [newAccount, setNewAccount] = useState({ account_name: '', account_type: 'ASSET', subtype: '' });
            const [loading, setLoading] = useState(false);

            // Business name for header
            const businessName = 'Keyboard Kingdom';

            useEffect(() => {
                if (activeView === 'ledger') {
                    loadAccountingEquation(); // Load for ledger page header
                    loadLedger();
                } else if (activeView === 'trial') {
                    loadTrialBalance();
                } else if (activeView === 'balance') {
                    loadBalanceSheet();
                } else if (activeView === 'accounts') {
                    loadAccounts();
                }
            }, [activeView, businessId]);

            const loadAccountingEquation = async () => {
                setLoading(true);
                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/financials/accounting_equation?business_id=${businessId}`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setAccountingEquation(data);
                    }
                } catch (error) {
                    console.error('Error loading accounting equation:', error);
                } finally {
                    setLoading(false);
                }
            };

            const loadLedger = async (offset = 0) => {
                setLoading(true);
                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/financials/ledger?business_id=${businessId}&limit=100&offset=${offset}`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setLedger(data.entries || []);
                        setLedgerPagination({
                            total_count: data.total_count,
                            limit: data.limit,
                            offset: data.offset
                        });
                    }
                } catch (error) {
                    console.error('Error loading ledger:', error);
                } finally {
                    setLoading(false);
                }
            };

            const loadTrialBalance = async () => {
                setLoading(true);
                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/financials/trial_balance?business_id=${businessId}`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setTrialBalance(data);
                    }
                } catch (error) {
                    console.error('Error loading trial balance:', error);
                } finally {
                    setLoading(false);
                }
            };

            const loadBalanceSheet = async () => {
                setLoading(true);
                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/financials/balance_sheet?business_id=${businessId}`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setBalanceSheet(data);
                    }
                } catch (error) {
                    console.error('Error loading balance sheet:', error);
                } finally {
                    setLoading(false);
                }
            };

            const loadAccounts = async () => {
                setLoading(true);
                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/accounts`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setAccounts(data);
                    }
                } catch (error) {
                    console.error('Error loading accounts:', error);
                } finally {
                    setLoading(false);
                }
            };

            const handleCreateAccount = async (e) => {
                e.preventDefault();
                try {
                    const response = await fetch(`${API_BASE_URL}/api/accounts`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        credentials: 'include',
                        body: JSON.stringify(newAccount)
                    });
                    if (response.ok) {
                        setShowCreateAccount(false);
                        setNewAccount({ account_name: '', account_type: 'ASSET', subtype: '' });
                        loadAccounts();
                    } else {
                        const error = await response.json();
                        alert(error.error || 'Failed to create account');
                    }
                } catch (error) {
                    console.error('Error creating account:', error);
                    alert('Failed to create account');
                }
            };

            const handleDeleteAccount = async (accountId) => {
                if (!confirm('Are you sure you want to delete this account? This action cannot be undone.')) {
                    return;
                }

                try {
                    const response = await fetch(`${API_BASE_URL}/api/accounts/${accountId}`, {
                        method: 'DELETE',
                        credentials: 'include'
                    });

                    if (response.ok) {
                        loadAccounts();
                    } else {
                        const error = await response.json();
                        alert(error.error || 'Failed to delete account');
                    }
                } catch (error) {
                    console.error('Error deleting account:', error);
                    alert('Failed to delete account');
                }
            };

            const handleReverseTransaction = async (transactionUuid) => {
                if (!confirm('Are you sure you want to reverse this transaction? This will create offsetting entries.')) {
                    return;
                }

                try {
                    const response = await fetch(`${API_BASE_URL}/api/financials/reverse_transaction`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        credentials: 'include',
                        body: JSON.stringify({ transaction_uuid: transactionUuid })
                    });

                    if (response.ok) {
                        loadLedger();
                        loadAccountingEquation();
                    } else {
                        const error = await response.json();
                        alert(error.error || 'Failed to reverse transaction');
                    }
                } catch (error) {
                    console.error('Error reversing transaction:', error);
                    alert('Failed to reverse transaction');
                }
            };

            return (
                <div>
                    {/* View Selector */}
                    <div className="mb-6 flex gap-2">
                        <button
                            onClick={() => setActiveView('ledger')}
                            className={`px-4 py-2 rounded-lg font-semibold transition ${
                                activeView === 'ledger'
                                    ? 'bg-primary text-white'
                                    : 'bg-dark-secondary text-gray-400 hover:bg-dark-tertiary'
                            }`}
                        >
                            Ledger
                        </button>
                        <button
                            onClick={() => setActiveView('trial')}
                            className={`px-4 py-2 rounded-lg font-semibold transition ${
                                activeView === 'trial'
                                    ? 'bg-primary text-white'
                                    : 'bg-dark-secondary text-gray-400 hover:bg-dark-tertiary'
                            }`}
                        >
                            Trial Balance
                        </button>
                        <button
                            onClick={() => setActiveView('balance')}
                            className={`px-4 py-2 rounded-lg font-semibold transition ${
                                activeView === 'balance'
                                    ? 'bg-primary text-white'
                                    : 'bg-dark-secondary text-gray-400 hover:bg-dark-tertiary'
                            }`}
                        >
                            Balance Sheet
                        </button>
                        <button
                            onClick={() => setActiveView('accounts')}
                            className={`px-4 py-2 rounded-lg font-semibold transition ${
                                activeView === 'accounts'
                                    ? 'bg-primary text-white'
                                    : 'bg-dark-secondary text-gray-400 hover:bg-dark-tertiary'
                            }`}
                        >
                            Manage Accounts
                        </button>
                    </div>

                    {/* Ledger View with Accounting Equation */}
                    {activeView === 'ledger' && (
                        <div>
                            {/* Accounting Equation at top */}
                            {accountingEquation && (
                                <div className="bg-dark-secondary rounded-lg p-6 mb-3">
                                    <div className="flex items-center justify-center gap-8 mb-4">
                                        <div className="text-center">
                                            <div className="text-gray-400 text-sm mb-1">Assets</div>
                                            <div className="text-2xl font-bold text-blue-400">
                                                ${accountingEquation.assets.toFixed(2)}
                                            </div>
                                        </div>
                                        <div className="text-3xl font-bold text-gray-500">=</div>
                                        <div className="text-center">
                                            <div className="text-gray-400 text-sm mb-1">Liabilities</div>
                                            <div className="text-2xl font-bold text-red-400">
                                                ${accountingEquation.liabilities.toFixed(2)}
                                            </div>
                                        </div>
                                        <div className="text-3xl font-bold text-gray-500">+</div>
                                        <div className="text-center">
                                            <div className="text-gray-400 text-sm mb-1">Equity</div>
                                            <div className="text-2xl font-bold text-green-400">
                                                ${accountingEquation.equity.toFixed(2)}
                                            </div>
                                        </div>
                                    </div>
                                    <div className="text-center">
                                        {accountingEquation.is_balanced ? (
                                            <div className="inline-flex items-center gap-2 bg-green-900/30 text-green-400 px-3 py-1 rounded text-sm">
                                                <span>✓ Balanced</span>
                                            </div>
                                        ) : (
                                            <div className="inline-flex items-center gap-2 bg-red-900/30 text-red-400 px-3 py-1 rounded text-sm">
                                                <span>⚠ Out of Balance by ${Math.abs(accountingEquation.difference).toFixed(2)}</span>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}

                            {/* General Ledger - Perfect Books Style */}
                            <div className="bg-dark-secondary rounded-lg overflow-hidden">
                                <div className="p-4 border-b border-gray-700">
                                    <h3 className="text-lg font-bold text-white">General Ledger</h3>
                                    <p className="text-sm text-gray-400">Double-entry transactions</p>
                                </div>
                                {loading ? (
                                    <div className="p-8 text-center text-gray-400">Loading ledger...</div>
                                ) : ledger.length === 0 ? (
                                    <div className="p-8 text-center text-gray-400">No ledger entries found</div>
                                ) : (
                                    <div className="overflow-x-auto">
                                        <table className="w-full">
                                            <thead className="bg-dark-tertiary">
                                                <tr>
                                                    <th className="px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase">Date</th>
                                                    <th className="px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase">Transaction</th>
                                                    <th className="px-4 py-3 text-right text-xs font-semibold text-gray-400 uppercase">Amount</th>
                                                    <th className="px-4 py-3 text-center text-xs font-semibold text-blue-400 uppercase">Assets</th>
                                                    <th className="px-4 py-3 text-center text-xs font-semibold text-gray-400">=</th>
                                                    <th className="px-4 py-3 text-center text-xs font-semibold text-red-400 uppercase">Liabilities</th>
                                                    <th className="px-4 py-3 text-center text-xs font-semibold text-gray-400">+</th>
                                                    <th className="px-4 py-3 text-center text-xs font-semibold text-green-400 uppercase">Equity</th>
                                                    <th className="px-4 py-3 text-center text-xs font-semibold text-gray-400 uppercase">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-gray-700">
                                                {(() => {
                                                    // Group entries by transaction_uuid
                                                    const grouped = {};
                                                    ledger.forEach(entry => {
                                                        if (!grouped[entry.transaction_uuid]) {
                                                            grouped[entry.transaction_uuid] = [];
                                                        }
                                                        grouped[entry.transaction_uuid].push(entry);
                                                    });

                                                    return Object.values(grouped).map((group, idx) => {
                                                        // Find debit and credit entries
                                                        const debitEntry = group.find(e => e.debit > 0);
                                                        const creditEntry = group.find(e => e.credit > 0);
                                                        const date = group[0].entry_date;
                                                        const description = group[0].description || '';
                                                        const amount = debitEntry ? debitEntry.debit : (creditEntry ? creditEntry.credit : 0);

                                                        // Calculate changes for each side of equation
                                                        let assetsChange = 0;
                                                        let liabilitiesChange = 0;
                                                        let equityChange = 0;

                                                        group.forEach(entry => {
                                                            const change = entry.debit - entry.credit;
                                                            if (entry.account_type === 'ASSET') {
                                                                assetsChange += change;
                                                            } else if (entry.account_type === 'LIABILITY') {
                                                                liabilitiesChange -= change; // Reverse for credit normal
                                                            } else if (entry.account_type === 'EQUITY' || entry.account_type === 'REVENUE') {
                                                                equityChange -= change; // Reverse for credit normal
                                                            } else if (entry.account_type === 'EXPENSE') {
                                                                equityChange += change; // Expenses reduce equity
                                                            }
                                                        });

                                                        return (
                                                            <tr key={group[0].transaction_uuid || idx} className="hover:bg-dark-tertiary transition">
                                                                <td className="px-4 py-3 text-sm text-gray-300">
                                                                    {new Date(date).toLocaleDateString()}
                                                                </td>
                                                                <td className="px-4 py-3 text-sm">
                                                                    <div className="text-white">
                                                                        {creditEntry?.account_name || 'N/A'} → {debitEntry?.account_name || 'N/A'}
                                                                    </div>
                                                                    {description && (
                                                                        <div className="text-xs text-gray-400 mt-1">{description}</div>
                                                                    )}
                                                                </td>
                                                                <td className="px-4 py-3 text-sm text-right text-primary font-semibold">
                                                                    ${parseFloat(amount).toFixed(2)}
                                                                </td>
                                                                <td className="px-4 py-3 text-center text-sm">
                                                                    {assetsChange !== 0 ? (
                                                                        <span className={assetsChange > 0 ? 'text-green-400' : 'text-red-400'}>
                                                                            {assetsChange > 0 ? '+' : ''}${assetsChange.toFixed(2)}
                                                                        </span>
                                                                    ) : <span className="text-gray-600">-</span>}
                                                                </td>
                                                                <td className="px-4 py-3 text-center text-gray-500">=</td>
                                                                <td className="px-4 py-3 text-center text-sm">
                                                                    {liabilitiesChange !== 0 ? (
                                                                        <span className={liabilitiesChange > 0 ? 'text-green-400' : 'text-red-400'}>
                                                                            {liabilitiesChange > 0 ? '+' : ''}${liabilitiesChange.toFixed(2)}
                                                                        </span>
                                                                    ) : <span className="text-gray-600">-</span>}
                                                                </td>
                                                                <td className="px-4 py-3 text-center text-gray-500">+</td>
                                                                <td className="px-4 py-3 text-center text-sm">
                                                                    {equityChange !== 0 ? (
                                                                        <span className={equityChange > 0 ? 'text-green-400' : 'text-red-400'}>
                                                                            {equityChange > 0 ? '+' : ''}${equityChange.toFixed(2)}
                                                                        </span>
                                                                    ) : <span className="text-gray-600">-</span>}
                                                                </td>
                                                                <td className="px-4 py-3 text-center">
                                                                    {group[0].reference_type !== 'CAPITAL_CONTRIBUTION' && (
                                                                        <button
                                                                            onClick={() => handleReverseTransaction(group[0].transaction_uuid)}
                                                                            className="px-3 py-1 text-xs text-red-400 hover:text-red-300 hover:bg-dark-tertiary rounded transition"
                                                                        >
                                                                            ✕ Reverse
                                                                        </button>
                                                                    )}
                                                                </td>
                                                            </tr>
                                                        );
                                                    });
                                                })()}
                                            </tbody>
                                        </table>
                                    </div>
                                )}
                                {ledger.length > 0 && (
                                    <div className="p-4 border-t border-gray-700 flex justify-between items-center">
                                        <div className="text-sm text-gray-400">
                                            Showing transactions
                                        </div>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={() => loadLedger(Math.max(0, ledgerPagination.offset - ledgerPagination.limit))}
                                                disabled={ledgerPagination.offset === 0}
                                                className="px-3 py-1 bg-dark-tertiary text-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 transition"
                                            >
                                                Previous
                                            </button>
                                            <button
                                                onClick={() => loadLedger(ledgerPagination.offset + ledgerPagination.limit)}
                                                disabled={ledgerPagination.offset + ledgerPagination.limit >= ledgerPagination.total_count}
                                                className="px-3 py-1 bg-dark-tertiary text-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 transition"
                                            >
                                                Next
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Trial Balance View */}
                    {activeView === 'trial' && trialBalance && (
                        <div className="bg-dark-secondary rounded-lg overflow-hidden">
                            <div className="p-4 border-b border-gray-700">
                                <h3 className="text-lg font-bold text-white">Trial Balance</h3>
                                <p className="text-sm text-gray-400">All accounts with their current balances</p>
                            </div>
                            {loading ? (
                                <div className="p-8 text-center text-gray-400">Loading trial balance...</div>
                            ) : trialBalance.accounts.length === 0 ? (
                                <div className="p-8 text-center text-gray-400">No accounts found</div>
                            ) : (
                                <div className="overflow-x-auto">
                                    <table className="w-full">
                                        <thead className="bg-dark-tertiary">
                                            <tr>
                                                <th className="px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase">Account</th>
                                                <th className="px-4 py-3 text-left text-xs font-semibold text-gray-400 uppercase">Type</th>
                                                <th className="px-4 py-3 text-right text-xs font-semibold text-gray-400 uppercase">Debit</th>
                                                <th className="px-4 py-3 text-right text-xs font-semibold text-gray-400 uppercase">Credit</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-gray-700">
                                            {trialBalance.accounts.map((account, idx) => (
                                                <tr key={account.account_id} className="hover:bg-dark-tertiary transition">
                                                    <td className="px-4 py-3 text-sm text-white font-semibold">
                                                        {account.account_name}
                                                    </td>
                                                    <td className="px-4 py-3 text-sm text-gray-400">
                                                        {account.account_type}
                                                    </td>
                                                    <td className="px-4 py-3 text-sm text-right text-blue-400 font-semibold">
                                                        {account.debit > 0 ? `$${account.debit.toFixed(2)}` : ''}
                                                    </td>
                                                    <td className="px-4 py-3 text-sm text-right text-green-400 font-semibold">
                                                        {account.credit > 0 ? `$${account.credit.toFixed(2)}` : ''}
                                                    </td>
                                                </tr>
                                            ))}
                                            <tr className="bg-dark-tertiary font-bold">
                                                <td className="px-4 py-3 text-sm text-white" colSpan="2">TOTALS</td>
                                                <td className="px-4 py-3 text-sm text-right text-blue-400">
                                                    ${trialBalance.total_debits.toFixed(2)}
                                                </td>
                                                <td className="px-4 py-3 text-sm text-right text-green-400">
                                                    ${trialBalance.total_credits.toFixed(2)}
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            )}
                            <div className="p-4 border-t border-gray-700 text-center">
                                {trialBalance.is_balanced ? (
                                    <div className="inline-flex items-center gap-2 bg-green-900/30 text-green-400 px-4 py-2 rounded-lg">
                                        <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                            <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                                        </svg>
                                        <span className="font-semibold">Trial Balance is Balanced</span>
                                    </div>
                                ) : (
                                    <div className="inline-flex items-center gap-2 bg-red-900/30 text-red-400 px-4 py-2 rounded-lg">
                                        <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                            <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
                                        </svg>
                                        <span className="font-semibold">Trial Balance is Out of Balance</span>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Balance Sheet View */}
                    {activeView === 'balance' && balanceSheet && (
                        <div className="bg-dark-secondary rounded-lg overflow-hidden">
                            <div className="p-4 border-b border-gray-700">
                                <h3 className="text-lg font-bold text-white">Balance Sheet</h3>
                                <p className="text-sm text-gray-400">Statement of Financial Position</p>
                            </div>
                            {loading ? (
                                <div className="p-8 text-center text-gray-400">Loading balance sheet...</div>
                            ) : (
                                <div className="p-6">
                                    <div className="grid md:grid-cols-2 gap-8">
                                        {/* Assets Column */}
                                        <div>
                                            <h4 className="text-lg font-bold text-blue-400 mb-4">ASSETS</h4>
                                            <div className="space-y-2">
                                                {balanceSheet.assets.map((asset, idx) => (
                                                    <div key={idx} className="flex justify-between text-sm">
                                                        <span className="text-gray-300">{asset.account_name}</span>
                                                        <span className="text-white font-semibold">${parseFloat(asset.balance).toFixed(2)}</span>
                                                    </div>
                                                ))}
                                                <div className="border-t border-gray-700 pt-2 mt-4 flex justify-between font-bold">
                                                    <span className="text-white">Total Assets</span>
                                                    <span className="text-blue-400">${balanceSheet.total_assets.toFixed(2)}</span>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Liabilities & Equity Column */}
                                        <div>
                                            <h4 className="text-lg font-bold text-red-400 mb-4">LIABILITIES</h4>
                                            <div className="space-y-2 mb-6">
                                                {balanceSheet.liabilities.length > 0 ? (
                                                    balanceSheet.liabilities.map((liability, idx) => (
                                                        <div key={idx} className="flex justify-between text-sm">
                                                            <span className="text-gray-300">{liability.account_name}</span>
                                                            <span className="text-white font-semibold">${parseFloat(liability.balance).toFixed(2)}</span>
                                                        </div>
                                                    ))
                                                ) : (
                                                    <div className="text-sm text-gray-500">No liabilities</div>
                                                )}
                                                <div className="border-t border-gray-700 pt-2 mt-4 flex justify-between font-bold">
                                                    <span className="text-white">Total Liabilities</span>
                                                    <span className="text-red-400">${balanceSheet.total_liabilities.toFixed(2)}</span>
                                                </div>
                                            </div>

                                            <h4 className="text-lg font-bold text-green-400 mb-4 mt-6">EQUITY</h4>
                                            <div className="space-y-2">
                                                {balanceSheet.equity.length > 0 ? (
                                                    balanceSheet.equity.map((eq, idx) => (
                                                        <div key={idx} className="flex justify-between text-sm">
                                                            <span className="text-gray-300">{eq.account_name}</span>
                                                            <span className="text-white font-semibold">${parseFloat(eq.balance).toFixed(2)}</span>
                                                        </div>
                                                    ))
                                                ) : (
                                                    <div className="text-sm text-gray-500">No equity accounts</div>
                                                )}
                                                <div className="border-t border-gray-700 pt-2 mt-4 flex justify-between font-bold">
                                                    <span className="text-white">Total Equity</span>
                                                    <span className="text-green-400">${balanceSheet.total_equity.toFixed(2)}</span>
                                                </div>
                                            </div>

                                            <div className="border-t-2 border-gray-600 pt-4 mt-6 flex justify-between font-bold text-lg">
                                                <span className="text-white">Total Liabilities & Equity</span>
                                                <span className="text-primary">${balanceSheet.total_liabilities_and_equity.toFixed(2)}</span>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Balance Check */}
                                    <div className="mt-8 text-center">
                                        {balanceSheet.is_balanced ? (
                                            <div className="inline-flex items-center gap-2 bg-green-900/30 text-green-400 px-4 py-2 rounded-lg">
                                                <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                                                </svg>
                                                <span className="font-semibold">Balance Sheet is Balanced</span>
                                            </div>
                                        ) : (
                                            <div className="inline-flex items-center gap-2 bg-red-900/30 text-red-400 px-4 py-2 rounded-lg">
                                                <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
                                                </svg>
                                                <span className="font-semibold">Balance Sheet is Out of Balance</span>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Accounts View */}
                    {activeView === 'accounts' && (
                        <div>
                            <div className="flex justify-between items-center mb-6">
                                <h3 className="text-2xl font-bold text-white">Chart of Accounts</h3>
                                <button
                                    onClick={() => setShowCreateAccount(true)}
                                    className="px-4 py-2 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition"
                                >
                                    + Create Account
                                </button>
                            </div>

                            {/* Create Account Form */}
                            {showCreateAccount && (
                                <div className="bg-dark-secondary rounded-lg p-6 mb-6">
                                    <h4 className="text-xl font-bold text-white mb-4">Create New Account</h4>
                                    <form onSubmit={handleCreateAccount} className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-300 mb-2">
                                                Account Name
                                            </label>
                                            <input
                                                type="text"
                                                value={newAccount.account_name}
                                                onChange={(e) => setNewAccount({...newAccount, account_name: e.target.value})}
                                                className="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                                placeholder="e.g., Cash, Accounts Receivable"
                                                required
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-300 mb-2">
                                                Account Type
                                            </label>
                                            <select
                                                value={newAccount.account_type}
                                                onChange={(e) => setNewAccount({...newAccount, account_type: e.target.value})}
                                                className="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                            >
                                                <option value="ASSET">Asset</option>
                                                <option value="LIABILITY">Liability</option>
                                                <option value="EQUITY">Equity</option>
                                                <option value="REVENUE">Revenue</option>
                                                <option value="EXPENSE">Expense</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-300 mb-2">
                                                Subtype (Optional)
                                            </label>
                                            <input
                                                type="text"
                                                value={newAccount.subtype}
                                                onChange={(e) => setNewAccount({...newAccount, subtype: e.target.value})}
                                                className="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary"
                                                placeholder="e.g., Current Asset, Fixed Asset"
                                            />
                                        </div>
                                        <div className="flex gap-3">
                                            <button
                                                type="submit"
                                                className="px-6 py-2 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition"
                                            >
                                                Create
                                            </button>
                                            <button
                                                type="button"
                                                onClick={() => {
                                                    setShowCreateAccount(false);
                                                    setNewAccount({ account_name: '', account_type: 'ASSET', subtype: '' });
                                                }}
                                                className="px-6 py-2 bg-dark-tertiary hover:bg-gray-700 text-white font-semibold rounded-lg transition"
                                            >
                                                Cancel
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            )}

                            {/* Accounts List */}
                            <div className="bg-dark-secondary rounded-lg overflow-hidden">
                                <table className="w-full">
                                    <thead>
                                        <tr className="bg-dark-tertiary">
                                            <th className="px-6 py-3 text-left text-sm font-semibold text-gray-300">Account Name</th>
                                            <th className="px-6 py-3 text-left text-sm font-semibold text-gray-300">Type</th>
                                            <th className="px-6 py-3 text-left text-sm font-semibold text-gray-300">Subtype</th>
                                            <th className="px-6 py-3 text-right text-sm font-semibold text-gray-300">Balance</th>
                                            <th className="px-6 py-3 text-center text-sm font-semibold text-gray-300">System</th>
                                            <th className="px-6 py-3 text-center text-sm font-semibold text-gray-300">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-gray-700">
                                        {accounts.length > 0 ? (
                                            accounts.map((account) => (
                                                <tr key={account.account_id} className="hover:bg-dark-tertiary transition">
                                                    <td className="px-6 py-4 text-white font-medium">{account.account_name}</td>
                                                    <td className="px-6 py-4">
                                                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded ${
                                                            account.account_type === 'ASSET' ? 'bg-blue-900/30 text-blue-400' :
                                                            account.account_type === 'LIABILITY' ? 'bg-red-900/30 text-red-400' :
                                                            account.account_type === 'EQUITY' ? 'bg-green-900/30 text-green-400' :
                                                            account.account_type === 'REVENUE' ? 'bg-yellow-900/30 text-yellow-400' :
                                                            'bg-purple-900/30 text-purple-400'
                                                        }`}>
                                                            {account.account_type}
                                                        </span>
                                                    </td>
                                                    <td className="px-6 py-4 text-gray-400 text-sm">{account.subtype || '-'}</td>
                                                    <td className="px-6 py-4 text-right">
                                                        <span className={`font-mono ${
                                                            parseFloat(account.balance) >= 0 ? 'text-white' : 'text-red-400'
                                                        }`}>
                                                            ${parseFloat(account.balance).toFixed(2)}
                                                        </span>
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        {account.is_system ? (
                                                            <span className="text-gray-500 text-sm">System</span>
                                                        ) : (
                                                            <span className="text-gray-400 text-sm">User</span>
                                                        )}
                                                    </td>
                                                    <td className="px-6 py-4 text-center">
                                                        {!account.is_system && Math.abs(parseFloat(account.balance)) < 0.01 ? (
                                                            <button
                                                                onClick={() => handleDeleteAccount(account.account_id)}
                                                                className="px-3 py-1 text-sm text-red-400 hover:text-red-300 hover:bg-red-900/20 rounded transition"
                                                            >
                                                                Delete
                                                            </button>
                                                        ) : (
                                                            <span className="text-gray-600 text-sm">-</span>
                                                        )}
                                                    </td>
                                                </tr>
                                            ))
                                        ) : (
                                            <tr>
                                                <td colSpan="6" className="px-6 py-8 text-center text-gray-500">
                                                    No accounts found. Create your first account to get started.
                                                </td>
                                            </tr>
                                        )}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // ============================================================================
        // INGESTION WIZARD COMPONENT
        // ============================================================================

        const IngestionWizard = ({ user, businessId, onClose }) => {
            // Form state
            const [itemName, setItemName] = useState('');
            const [category, setCategory] = useState('Switch');
            const [quantity, setQuantity] = useState(1);
            const [unitCost, setUnitCost] = useState('');
            const [notes, setNotes] = useState('');
            const [locationId, setLocationId] = useState('');
            const [sessionSource, setSessionSource] = useState('Manual Entry');

            // UI state
            const [suggestions, setSuggestions] = useState([]);
            const [showSuggestions, setShowSuggestions] = useState(false);
            const [sessionItems, setSessionItems] = useState([]);
            const [sessionTotals, setSessionTotals] = useState({
                item_count: 0,
                total_quantity: 0,
                total_value: 0
            });
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            const [successMessage, setSuccessMessage] = useState('');
            const [locations, setLocations] = useState([]);

            const itemNameRef = useRef(null);

            // Categories for dropdown
            const categories = ['Switch', 'PCB', 'Case', 'Keycaps', 'Microcontroller', 'Wire', 'Other'];

            // Load locations on mount
            useEffect(() => {
                loadLocations();
                loadSessionSummary();
            }, []);

            // Load session summary when location changes
            useEffect(() => {
                if (locationId) {
                    loadSessionSummary();
                }
            }, [locationId]);

            const loadLocations = async () => {
                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/locations?business_id=${businessId}`,
                        { credentials: 'include' }
                    );
                    if (response.ok) {
                        const data = await response.json();
                        setLocations(data);
                        // Auto-select first location if available
                        if (data.length > 0 && !locationId) {
                            setLocationId(data[0].location_id);
                        }
                    }
                } catch (error) {
                    console.error('Error loading locations:', error);
                }
            };

            // Typeahead search for products
            const handleItemNameChange = async (value) => {
                setItemName(value);

                if (value.length < 2) {
                    setSuggestions([]);
                    setShowSuggestions(false);
                    return;
                }

                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/ingest/search_products?q=${encodeURIComponent(value)}&business_id=${businessId}`,
                        { credentials: 'include' }
                    );

                    if (response.ok) {
                        const results = await response.json();
                        setSuggestions(results);
                        setShowSuggestions(results.length > 0);
                    }
                } catch (err) {
                    console.error('Search error:', err);
                }
            };

            // Select suggestion from typeahead
            const selectSuggestion = (suggestion) => {
                setItemName(suggestion.name);
                setCategory(suggestion.category || 'Other');
                setShowSuggestions(false);
                setSuggestions([]);
            };

            // Load session summary
            const loadSessionSummary = async () => {
                if (!locationId) return;

                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/ingest/session_summary?location_id=${locationId}`,
                        { credentials: 'include' }
                    );

                    if (response.ok) {
                        const data = await response.json();
                        setSessionItems(data.items || []);
                        setSessionTotals(data.totals || { item_count: 0, total_quantity: 0, total_value: 0 });
                    }
                } catch (err) {
                    console.error('Failed to load session summary:', err);
                }
            };

            // Add item
            const handleSaveAndNext = async (e) => {
                e.preventDefault();
                setError('');
                setSuccessMessage('');

                // Validation
                if (!itemName.trim()) {
                    setError('Item name is required');
                    return;
                }
                if (!locationId) {
                    setError('Please select a location');
                    return;
                }
                if (quantity <= 0) {
                    setError('Quantity must be greater than 0');
                    return;
                }
                if (!unitCost || parseFloat(unitCost) < 0) {
                    setError('Please enter a valid unit cost');
                    return;
                }

                setLoading(true);

                try {
                    const response = await fetch(`${API_BASE_URL}/api/ingest/add_item`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        credentials: 'include',
                        body: JSON.stringify({
                            item_name: itemName.trim(),
                            category,
                            quantity: parseFloat(quantity),
                            unit_cost: parseFloat(unitCost),
                            business_id: businessId,
                            location_id: parseInt(locationId),
                            session_source: sessionSource.trim(),
                            notes: notes.trim()
                        })
                    });

                    if (!response.ok) {
                        const data = await response.json();
                        throw new Error(data.error || 'Failed to add item');
                    }

                    const result = await response.json();

                    // Success!
                    setSuccessMessage(`✓ Added ${result.item_name} (${result.sku})`);

                    // Reset form
                    setItemName('');
                    setCategory('Switch');
                    setQuantity(1);
                    setUnitCost('');
                    setNotes('');

                    // Reload session summary
                    await loadSessionSummary();

                    // Focus back to item name
                    setTimeout(() => {
                        setSuccessMessage('');
                        itemNameRef.current?.focus();
                    }, 1500);

                } catch (err) {
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            // Delete item (undo)
            const handleDeleteItem = async (layerId) => {
                if (!confirm('Remove this item from the session?')) return;

                try {
                    const response = await fetch(
                        `${API_BASE_URL}/api/ingest/delete_item?layer_id=${layerId}`,
                        {
                            method: 'DELETE',
                            credentials: 'include'
                        }
                    );

                    if (response.ok) {
                        await loadSessionSummary();
                    } else {
                        const data = await response.json();
                        alert(data.error || 'Failed to delete item');
                    }
                } catch (err) {
                    alert('Error deleting item: ' + err.message);
                }
            };

            // Increment/Decrement quantity
            const adjustQuantity = (delta) => {
                setQuantity(Math.max(1, quantity + delta));
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg shadow-2xl max-w-7xl w-full h-full max-h-[95vh] overflow-hidden flex flex-col">
                        {/* Header */}
                        <div className="bg-gradient-to-r from-cyan-500 to-blue-600 text-white px-6 py-4 flex justify-between items-center">
                            <div>
                                <h2 className="text-2xl font-bold">Fast Ingestion Wizard</h2>
                                <p className="text-cyan-100 text-sm">Digitize physical inventory quickly</p>
                            </div>
                            <button
                                onClick={onClose}
                                className="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition"
                            >
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>

                        {/* Main Content - Two Column Layout */}
                        <div className="flex-1 flex overflow-hidden">
                            {/* Left: Input Form */}
                            <div className="flex-1 p-8 overflow-y-auto border-r border-gray-200">
                                <form onSubmit={handleSaveAndNext} className="space-y-6">
                                    {/* Location */}
                                    <div>
                                        <label className="block text-lg font-semibold text-gray-700 mb-2">
                                            Location *
                                        </label>
                                        <select
                                            value={locationId}
                                            onChange={(e) => setLocationId(e.target.value)}
                                            className="w-full px-6 py-4 text-xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-cyan-500"
                                            disabled={loading}
                                            required
                                        >
                                            {locations.length === 0 && <option value="">No locations available - create one first</option>}
                                            {locations.map(loc => (
                                                <option key={loc.location_id} value={loc.location_id}>
                                                    {loc.name} ({loc.location_type})
                                                </option>
                                            ))}
                                        </select>
                                        <p className="text-sm text-gray-500 mt-1">
                                            Select where this item is stored
                                        </p>
                                    </div>

                                    <hr className="border-gray-300" />

                                    {/* Item Name with Typeahead */}
                                    <div className="relative">
                                        <label className="block text-lg font-semibold text-gray-700 mb-2">
                                            Item Name *
                                        </label>
                                        <input
                                            ref={itemNameRef}
                                            type="text"
                                            value={itemName}
                                            onChange={(e) => handleItemNameChange(e.target.value)}
                                            onFocus={() => setShowSuggestions(suggestions.length > 0)}
                                            placeholder="e.g., Gateron Yellow Switch"
                                            className="w-full px-6 py-4 text-xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-cyan-500"
                                            disabled={loading}
                                            autoComplete="off"
                                        />

                                        {/* Typeahead Dropdown */}
                                        {showSuggestions && (
                                            <div className="absolute z-10 w-full mt-2 bg-white border-2 border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto">
                                                {suggestions.map((item) => (
                                                    <button
                                                        key={item.product_id}
                                                        type="button"
                                                        onClick={() => selectSuggestion(item)}
                                                        className="w-full px-6 py-3 text-left hover:bg-cyan-50 border-b border-gray-200 last:border-b-0"
                                                    >
                                                        <div className="font-semibold text-gray-900">{item.name}</div>
                                                        <div className="text-sm text-gray-600">
                                                            SKU: {item.sku} | Category: {item.category}
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>

                                    {/* Category */}
                                    <div>
                                        <label className="block text-lg font-semibold text-gray-700 mb-2">
                                            Category *
                                        </label>
                                        <select
                                            value={category}
                                            onChange={(e) => setCategory(e.target.value)}
                                            className="w-full px-6 py-4 text-xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-cyan-500"
                                            disabled={loading}
                                        >
                                            {categories.map(cat => (
                                                <option key={cat} value={cat}>{cat}</option>
                                            ))}
                                        </select>
                                    </div>

                                    {/* Quantity with +/- Buttons */}
                                    <div>
                                        <label className="block text-lg font-semibold text-gray-700 mb-2">
                                            Quantity *
                                        </label>
                                        <div className="flex items-center space-x-4">
                                            <button
                                                type="button"
                                                onClick={() => adjustQuantity(-1)}
                                                className="w-16 h-16 bg-red-500 hover:bg-red-600 text-white text-3xl font-bold rounded-lg transition"
                                                disabled={loading}
                                            >
                                                -
                                            </button>
                                            <input
                                                type="number"
                                                value={quantity}
                                                onChange={(e) => setQuantity(Math.max(1, parseInt(e.target.value) || 1))}
                                                onFocus={(e) => e.target.select()}
                                                onClick={(e) => e.target.select()}
                                                className="flex-1 px-6 py-4 text-3xl font-bold text-center border-2 border-gray-300 rounded-lg focus:outline-none focus:border-cyan-500"
                                                min="1"
                                                disabled={loading}
                                            />
                                            <button
                                                type="button"
                                                onClick={() => adjustQuantity(1)}
                                                className="w-16 h-16 bg-green-500 hover:bg-green-600 text-white text-3xl font-bold rounded-lg transition"
                                                disabled={loading}
                                            >
                                                +
                                            </button>
                                        </div>
                                    </div>

                                    {/* Unit Cost Estimate */}
                                    <div>
                                        <label className="block text-lg font-semibold text-gray-700 mb-2">
                                            Unit Cost Estimate *
                                        </label>
                                        <div className="relative">
                                            <span className="absolute left-6 top-1/2 transform -translate-y-1/2 text-2xl text-gray-500">$</span>
                                            <input
                                                type="number"
                                                step="any"
                                                value={unitCost}
                                                onChange={(e) => setUnitCost(e.target.value)}
                                                placeholder="0.00"
                                                className="w-full pl-12 pr-6 py-4 text-xl border-2 border-gray-300 rounded-lg focus:outline-none focus:border-cyan-500"
                                                disabled={loading}
                                            />
                                        </div>
                                        {unitCost && quantity && (
                                            <p className="text-sm text-gray-600 mt-2">
                                                Total Value: <span className="font-bold text-green-600">
                                                    ${(parseFloat(unitCost) * quantity).toFixed(2)}
                                                </span>
                                            </p>
                                        )}
                                    </div>

                                    {/* Notes (Optional) */}
                                    <div>
                                        <label className="block text-lg font-semibold text-gray-700 mb-2">
                                            Notes (Optional)
                                        </label>
                                        <textarea
                                            value={notes}
                                            onChange={(e) => setNotes(e.target.value)}
                                            placeholder="Any additional information..."
                                            rows="3"
                                            className="w-full px-6 py-4 text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:border-cyan-500 resize-none"
                                            disabled={loading}
                                        />
                                    </div>

                                    {/* Error/Success Messages */}
                                    {error && (
                                        <div className="bg-red-100 border-2 border-red-500 text-red-700 px-6 py-4 rounded-lg">
                                            {error}
                                        </div>
                                    )}

                                    {successMessage && (
                                        <div className="bg-green-100 border-2 border-green-500 text-green-700 px-6 py-4 rounded-lg font-semibold">
                                            {successMessage}
                                        </div>
                                    )}

                                    {/* Submit Button */}
                                    <button
                                        type="submit"
                                        disabled={loading}
                                        className="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold text-2xl py-6 rounded-lg transition shadow-lg disabled:opacity-50"
                                    >
                                        {loading ? 'SAVING...' : 'SAVE & NEXT ➜'}
                                    </button>
                                </form>
                            </div>

                            {/* Right: Session Summary */}
                            <div className="w-96 bg-gray-50 p-6 overflow-y-auto">
                                <div className="sticky top-0 bg-gray-50 pb-4 mb-4 border-b border-gray-300">
                                    <h3 className="text-xl font-bold text-gray-900 mb-2">Session Summary</h3>
                                    {sessionSource && (
                                        <p className="text-sm text-gray-600 mb-4 bg-cyan-100 px-3 py-2 rounded">
                                            {sessionSource}
                                        </p>
                                    )}

                                    {/* Totals */}
                                    <div className="space-y-2">
                                        <div className="flex justify-between items-center">
                                            <span className="text-gray-700">Items:</span>
                                            <span className="font-bold text-lg">{sessionTotals.item_count}</span>
                                        </div>
                                        <div className="flex justify-between items-center">
                                            <span className="text-gray-700">Total Qty:</span>
                                            <span className="font-bold text-lg">{sessionTotals.total_quantity}</span>
                                        </div>
                                        <div className="flex justify-between items-center pt-2 border-t border-gray-300">
                                            <span className="text-gray-700 font-semibold">Total Value:</span>
                                            <span className="font-bold text-2xl text-green-600">
                                                ${Number(sessionTotals.total_value).toFixed(2)}
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                {/* Item List */}
                                <div className="space-y-3">
                                    {sessionItems.length === 0 ? (
                                        <p className="text-gray-500 text-center py-8">No items added yet</p>
                                    ) : (
                                        sessionItems.map((item) => (
                                            <div
                                                key={item.layer_id}
                                                className="bg-white border border-gray-300 rounded-lg p-4 shadow-sm hover:shadow-md transition"
                                            >
                                                <div className="flex justify-between items-start mb-2">
                                                    <div className="flex-1">
                                                        <h4 className="font-semibold text-gray-900">{item.name}</h4>
                                                        <p className="text-xs text-gray-500">SKU: {item.sku}</p>
                                                    </div>
                                                    <button
                                                        onClick={() => handleDeleteItem(item.layer_id)}
                                                        className="text-red-500 hover:text-red-700 ml-2"
                                                        title="Remove item"
                                                    >
                                                        <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                                            <path fillRule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clipRule="evenodd" />
                                                        </svg>
                                                    </button>
                                                </div>
                                                <div className="grid grid-cols-2 gap-2 text-sm">
                                                    <div>
                                                        <span className="text-gray-600">Category:</span>
                                                        <span className="ml-1 font-medium">{item.category}</span>
                                                    </div>
                                                    <div>
                                                        <span className="text-gray-600">Qty:</span>
                                                        <span className="ml-1 font-medium">{item.quantity_remaining}</span>
                                                    </div>
                                                    <div>
                                                        <span className="text-gray-600">Unit Cost:</span>
                                                        <span className="ml-1 font-medium">${item.unit_cost}</span>
                                                    </div>
                                                    <div>
                                                        <span className="text-gray-600">Total:</span>
                                                        <span className="ml-1 font-bold text-green-600">
                                                            ${Number(item.total_value).toFixed(2)}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        function Dashboard() {
            const [user, setUser] = useState(null);
            const [businessId, setBusinessId] = useState(null);
            const [businessName, setBusinessName] = useState('');
            const [loading, setLoading] = useState(true);
            const [theme, setTheme] = useState('cyan');
            const [activeTab, setActiveTab] = useState('inventory');
            const [showIngestionWizard, setShowIngestionWizard] = useState(false);

            useEffect(() => {
                // Get business_id from URL
                const urlParams = new URLSearchParams(window.location.search);
                const bId = urlParams.get('business_id');
                setBusinessId(bId);

                // Load theme
                const savedTheme = localStorage.getItem('artifact_theme') || 'cyan';
                setTheme(savedTheme);
                document.body.setAttribute('data-theme', savedTheme);
                document.body.className = 'bg-gradient-custom';

                checkAuth();
            }, []);

            const handleThemeChange = (newTheme) => {
                setTheme(newTheme);
                localStorage.setItem('artifact_theme', newTheme);
                document.body.setAttribute('data-theme', newTheme);
            };

            const checkAuth = async () => {
                try {
                    const response = await fetch(`${API_BASE_URL}/api/check_auth`, {
                        credentials: 'include'
                    });

                    if (response.ok) {
                        const data = await response.json();
                        setUser(data.user);

                        // For now, set business name from mock data
                        if (businessId === '1') {
                            setBusinessName('Keyboard Kingdom');
                        } else if (businessId === '2') {
                            setBusinessName('Microcontroller Depot');
                        }

                        setLoading(false);
                    } else {
                        window.location.href = '/';
                    }
                } catch (error) {
                    console.error('Auth check failed:', error);
                    window.location.href = '/';
                }
            };

            const handleLogout = async () => {
                try {
                    const response = await fetch(`${API_BASE_URL}/api/logout`, {
                        method: 'POST',
                        credentials: 'include'
                    });
                    // Clear any local storage
                    localStorage.clear();
                    // Force a full page reload to clear all state
                    window.location.replace('/');
                } catch (error) {
                    console.error('Logout failed:', error);
                    // Still redirect even if the API call fails
                    localStorage.clear();
                    window.location.replace('/');
                }
            };

            const goToHome = () => {
                window.location.href = '/home.html';
            };

            if (loading) {
                return (
                    <div className="min-h-screen flex items-center justify-center">
                        <div className="text-gray-300">Loading...</div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="card-bg border-b">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div className="flex justify-between items-center">
                                <div className="flex items-center space-x-4">
                                    <button
                                        onClick={goToHome}
                                        className="text-gray-300 hover:text-white transition"
                                        title="Back to workspaces"
                                    >
                                        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                                        </svg>
                                    </button>
                                    <div>
                                        <h1 className="text-2xl font-bold">
                                            <span className="text-white">Artifact </span>
                                            <span className="text-primary">Live</span>
                                        </h1>
                                        <p className="text-sm text-gray-300">Inventory & Operations</p>
                                    </div>
                                </div>
                                <div className="flex items-center justify-center flex-1">
                                    <div className="flex items-center gap-4">
                                        <span className="text-4xl leading-none">⌨️</span>
                                        <h2 className="text-3xl font-bold text-white leading-none">Keyboard Kingdom</h2>
                                    </div>
                                </div>
                                <div className="flex items-center space-x-4">
                                    {/* Theme Selector */}
                                    <select
                                        value={theme}
                                        onChange={(e) => handleThemeChange(e.target.value)}
                                        className="card-bg text-white px-3 py-2 border rounded-md text-sm focus:outline-none"
                                    >
                                        <option value="cyan">Cyan/Blue</option>
                                        <option value="tan">Tan/Amber</option>
                                        <option value="purple">Purple/Violet</option>
                                        <option value="emerald">Emerald/Green</option>
                                        <option value="rose">Rose/Pink</option>
                                        <option value="slate">Slate/Gray</option>
                                    </select>
                                    <span className="text-sm text-gray-300">{user?.username}</span>
                                    <button
                                        onClick={handleLogout}
                                        className="px-4 py-2 text-sm font-medium text-gray-300 hover:text-white transition"
                                    >
                                        Logout
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Navigation Tabs */}
                    <div className="card-bg border-b">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <nav className="flex space-x-8">
                                <button
                                    onClick={() => setActiveTab('inventory')}
                                    className={`py-4 px-1 border-b-2 font-medium text-sm transition ${
                                        activeTab === 'inventory'
                                            ? 'border-primary text-primary'
                                            : 'border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500'
                                    }`}
                                >
                                    Inventory
                                </button>
                                <button
                                    onClick={() => setActiveTab('orders')}
                                    className={`py-4 px-1 border-b-2 font-medium text-sm transition ${
                                        activeTab === 'orders'
                                            ? 'border-primary text-primary'
                                            : 'border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500'
                                    }`}
                                >
                                    Orders
                                </button>
                                <button
                                    onClick={() => setActiveTab('financials')}
                                    className={`py-4 px-1 border-b-2 font-medium text-sm transition ${
                                        activeTab === 'financials'
                                            ? 'border-primary text-primary'
                                            : 'border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500'
                                    }`}
                                >
                                    Financials
                                </button>
                                <button
                                    onClick={() => setActiveTab('locations')}
                                    className={`py-4 px-1 border-b-2 font-medium text-sm transition ${
                                        activeTab === 'locations'
                                            ? 'border-primary text-primary'
                                            : 'border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500'
                                    }`}
                                >
                                    Locations
                                </button>
                            </nav>
                        </div>
                    </div>

                    {/* Main Content */}
                    <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {activeTab === 'inventory' && (
                            <InventoryTab
                                user={user}
                                businessId={businessId}
                                onOpenIngestionWizard={() => setShowIngestionWizard(true)}
                            />
                        )}

                        {activeTab === 'orders' && (
                            <div className="text-center py-12">
                                <p className="text-gray-400">Orders management coming soon...</p>
                            </div>
                        )}

                        {activeTab === 'financials' && (
                            <FinancialsTab user={user} businessId={businessId} />
                        )}

                        {activeTab === 'locations' && (
                            <LocationsTab user={user} businessId={businessId} />
                        )}
                    </main>

                    {/* Ingestion Wizard Modal */}
                    {showIngestionWizard && (
                        <IngestionWizard 
                            user={user} 
                            businessId={businessId} 
                            onClose={() => setShowIngestionWizard(false)} 
                        />
                    )}
                </div>
            );
        }

        ReactDOM.render(<Dashboard />, document.getElementById('root'));
    </script>
</body>
</html>